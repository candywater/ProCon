<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script type="text/javascript">
    /**
* @param {string} s
* @return {string}
*/
var longestPalindrome = function(s) {
  var r = reverseStr(s)
  var epos = 0
  var lcs = 0
  var t = [[]]
  var len = s.length
  //init
  for(var i = 1; i < len; i++){
    if(s[i] == r[0]) {
      t.push([1]);
    }
    else t.push([0])
  }
  for(var j = 0; j < len; j++){
    if(s[0] == r[j]){
      t[0].push(1)
    }
    else t[0].push(0)
  }

  for(var i = 1; i < len; i++){
    for(var j = 1; j < len; j++)
      if(s[i] == r[j]){
        t[i].push(t[i-1][j-1] + 1)
        if(t[i][j] > lcs){
          //console.log(t[i][j] + " " + i + " " + j);
          //normal_str start pos = reverse_str's end pos
          if( i + 1 - t[i][j] ==  len - j - 1){
            lcs = t[i][j]
            epos = i;
          }
      }
      else t[i].push(0)
  }

  /*
  for(var i = 0; i < len; i++){
    for(var j = 0; j < len; j++){
      if(t[i][j] > lcs){
        //console.log(t[i][j] + " " + i + " " + j);
        //normal_str start pos = reverse_str's end pos
        if( i + 1 - t[i][j] ==  len - j - 1){
          lcs = t[i][j]
          epos = i;
        }
      }
    }
  }*/
  /*
  console.log(s);
  console.log(r);
  showhand(t);
  console.log(epos);
  console.log(lcs);
  console.log("res:" + s.substr(epos - lcs + 1, lcs));*/
  return s.substr(epos - lcs + 1, lcs)
};

function reverseStr(s){
  var res = ""
  for(var i = 0; i < s.length; i++)
    res += s[s.length - i - 1]
  return res
}

//debug
function showhand(t){
  for(var i = 0; i < t.length; i++){
    var tmp = ""
    for(var j = 0; j < t[i].length; j++)
      tmp += t[i][j] + " "
    console.log(tmp)
  }
}

//longestPalindrome("bab33a2d")
longestPalindrome("a")
longestPalindrome("abcdasdfghjkldcba")
    </script>
  </head>
  <body>

  </body>
</html>
